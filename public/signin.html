<!DOCTYPE HTML>
<html>

<head>
	<base href="/" />
	
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>PitchPerfect</title>
	<script src="vue.js"></script>

	<link rel="stylesheet" href="style.css">
	<!-- font -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Doppio+One&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600&display=swap" rel="stylesheet">
	<!-- font -->
	<!--code for prettifying visual on phone-->
	<meta content="user-scalable=no, width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0"
		name="viewport">
</head>

<body>

	<div class="content" align="center">
		<h1>Sign In</h1>
		<form class="modal-content">
			<input type="text" placeholder="Nickname" name="nickname" id="nickname" required>
			<input type="password" placeholder="Enter Password" name="psw" id="password" required>
			<br>

			<button class="backbutton" onclick="location.href = '/main.html'">Back</button>
			<button class="button" style="color:white; background-color:#F2C94C" onclick="signin()">Sign In</button>
		</form>

	</div>
	<!-- <script type="module" src="../src/main.js"></script> -->
	<!-- <script type="module" src="signin.js"></script> -->
	<script>
		function signin() {
			// location.replace("http://naver.com");
			var userName = document.getElementById("nickname").value;
			var userPass = document.getElementById("password").value;
			var usersRef = firebase.firestore().collection("userinfo").doc(userName)

			usersRef.get()
				.then(function (doc) {
					if (doc.exists) {
						var password = doc.data()["password"];
						console.log("password: ", password);
						if (password == userPass) {
							location.replace("http://naver.com");
						}
						else {
							window.alert("invalid password");
						}
					} else {
						window.alert("invalid username!");
					}
				}).catch(function (error) {
					console.log("Error getting document:", error);
				});

		}
	</script>

</body>

</html>